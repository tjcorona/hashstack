extends: [cmake_package]
dependencies:
  build: [mpi, parmetis, zoltan]

sources:
  - url: https://github.com/tjcorona/core.git
    key: git:374c1f0640d2a96242e7a5fd01fd27bd5a935b11

defaults:
  relocatable: true

build_stages:

- name: setup_builddir
  after: prologue
  handler: bash
  bash: |
    mkdir -p _build
    cd _build

- name: configure
  debug: true
  extra: [
  '-DCMAKE_C_COMPILER:STRING=${MPICC}',
  '-DCMAKE_CXX_COMPILER:STRING=${MPICXX}',
  '-DENABLE_ZOLTAN:BOOL=ON',
  '-DENABLE_SIMMETRIX:BOOL=OFF',
  '-DZOLTAN_PREFIX:PATH=${ZOLTAN_DIR}',
  '-DPARMETIS_PREFIX:PATH=${PARMETIS_DIR}',
  ]
