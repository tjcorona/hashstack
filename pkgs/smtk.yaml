extends: [cmake_package]
dependencies:
  build: [boost, hdf5, netcdf4, pybind11, python, remus]

sources:
- url: https://gitlab.kitware.com/cmb/smtk.git
  key: git:2c34aace226d5d2d0215f16e9cb043b49d00d7f0

defaults:
  relocatable: true

build_stages:
- name: configure
  extra: ['-D SMTK_ENABLE_VTK_SUPPORT:BOOL=OFF',
             '-D SMTK_ENABLE_MESH_SESSION:BOOL=ON',
             '-D SMTK_ENABLE_REMUS_SUPPORT:BOOL=ON',
             '-D SMTK_ENABLE_PYTHON_WRAPPING:BOOL=ON',
             '-D SMTK_USE_SYSTEM_MOAB:BOOL=OFF',
             '-D ENABLE_HDF5:BOOL=ON',
             '-D ENABLE_NETCDF:BOOL=ON',
             '-D NETCDF_ROOT:STRING=${NETCDF4_DIR}',
             '-D PYTHON_LIBRARY:FILEPATH=${PYTHON_DIR}/lib/libpython2.7.dylib',
             '-D PYTHON_EXECUTABLE:FILEPATH=${PYTHON_DIR}/bin/python2.7',
             '-D PYTHON_INCLUDE_DIR:PATH=${PYTHON_DIR}/include/python2.7',
             '-D NETCDF_C_LIBRARY=${NETCDF4_DIR}/lib/libnetcdf.dylib']
